# 1, 도메인 모델 시작하기 

## 1.1. 도메인이란 
- 도메인 : 소프트웨어로 해결하고자 하는 문제 영역
  - 특정 도메인을 위한 소프트웨어라고 해서 도메인이 제공해야 할 모든 기능을 직접 구혆하는 것은 아니다. 

## 1.2. 도메인 전문가와 개발자 간 지식 공유 
- 도메인 전문가 : 도메인에 대한 지식과 경험을 바탕으로 본인들이 원하는 기능 개발을 요구
- 개발자 : 도메인 전문가의 요구사항을 분석하고 설계하여 코드를 작성하며 테스트하고 배포

## 1.3 도메인 모델, 1.5 도메인 모델 도출
- 도메인 모델 : 특정 도메인을 개념적으로 표현한 것
  - 도메인 이해 - 도메인의 기능, 도메인의 주요 데이터 구성을 파악
    - 도메인의 기능 
      - 상태 다이어그램을 통해 도메인의 기능을 이해
  - 도메인을 모델링 - 모델을 구성하는 핵심 구성요소, 규칙, 기능 정의

## 1.4 도메인 모델 패턴 
- 도메인 모델 패턴 :  아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴 
참고 - http://javacan.tistory.com/entry/94
| Stage | Description |
| -- | -- |
| Presentation 사용자 인터페이스 or 표현 | 사용자의 요청을 처리하고 사용자의 정보를 보여준다 |    
| Application 응용 | 사용자가 요청한 기능을 실행한다 |
| Domain 도메인 | 시스템에 제공할 도메인 규칙을 구현한다 |
| Infrastructure 인프라스트럭처 | 데이터베이스나 메세징 시스템과 같은 외부 시스템과의 연동을 처리한다 |

### 개념 모델과 구현모델 
  - 개요 수준의 개념 모델로 도메인에 대한 전체 윤곽을 이해하는 데 집중하고, 구현하는 과정에서 개념 모델을 구현 모델로 점진적으로 발전시켜 나가야 한다.

### 도메인 모델의 다른 의미
  - "도메인 모델"이란 용어는 도메인 자체를 표현하는 개념적인 모델을 의미하지만, 도메인 계층을 구현할 때 사용하는 객체 모델을 언급할 때에도 "도메인 모델"이란 용어를 사용

### 문서화 
- **도메인 지식 중심으로 코드를 작성 = 코드의 동작과정을 통해 도메인관점에 적용되는 부분을 이해할 수 있는 코드**


  
## 1.6 엔티티와 벨류 
### 엔티티 
- 엔티티 : 식별자를 가진다
  - 동일한 엔티티를 구분하기 위해 식별자를 가지는 것은 중요하다. 
  - 상호관계를 가진 서로 다른 엔티티를 연결하는 것은 식별자를 기준으로 성립한다. 
- 엔티티 식별자 생성 
  - 특정 규칙에 따라 생성 
  - UUID or Nano Id와 같은 고유 식별자 생성기 사용
  - 값을 직접 입력
  - 일련번호 사용(시퀀스 등)

### 벨류 
- 벨류 : 개념적으로 완전한 하나를 표현할 때 사용 
  - e.g. 주소1 + 상세 주소 = 주소
- 벨류 객체의 데이터 변경 
  - 기존 데이터를 직접 변경 보다는 변경한 데이터를 갖는 새로운 밸류 객체를 생성하는 방식을 선호
    - 직접 변경하지 않아서 값이 잘못 반영되는 상황을 방지
    - e.g. price * unit -> price.getTotalAmout(price, unit)
  
### 엔티티 식별자와 벨류 타입
- 식별자를 위한 벨류타입을 사용해서 도메인에서 의미가 잘 드러나도록 할 수 있다. 
  - e.g. Money {amount} - amount 수적 양이기 때문에 돈, 어떤 것에 대한 양을 뜻할수 있어 명확하게 도메인의 의미를 정의

### 도메인 모델의 set 메서드
- DTO get/set 메서드 
  - DTO Data Transfer Object의 약자,, 프레젠테이션 계층과 도메인 계층이 데이터를 주고 받을 때 사용하는 일종의 구조체
  - Old - 프레임워크에서는 DTO를 통해 DB를 접근하므로 get/set에 필수로 선언하여 사용 
  - Now - set 메서드가 이닌 private 필드에 직접 값을 할당할 수 있는 기능을 별도로 제공하여 의미를 명확하게 처리
- set 메서드를 기능단위로 구분함으로써 벨류 타입을 불변 타입으로 구현한다.

### 도메인 용어와 유비쿼터스 용어
- 에릭 에반스는 도메인 주도 설계에서 언어의 중요함을 강조 - 유비쿼터스 언어 사용
- 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 대화, 문서, 도메인 모델, 코드, 테스트 등 모든 곳에서 같은 용어를 사용한다. 
  - 각 소통 과정의 용어의 모호함을 줄이고 해석에 대한 시간 낭비를 줄익는 목적